import open3d as o3d
import numpy as np

ply_point_cloud = o3d.data.PLYPointCloud()
point_cloud = o3d.io.read_point_cloud(ply_point_cloud.path)

o3d.visualization.draw_geometries([point_cloud])

points = np.asarray(point_cloud.points)

distance_threshold = 0.02
ransac_n = 3

plane_model, inliers = point_cloud.segment_plane(distance_threshold, ransac_n, 300, 0.999)

inliers_mask = np.array(inliers)

inlier_points = points[inliers_mask]

plane_cloud = o3d.geometry.PointCloud()
plane_cloud.points = o3d.utility.Vector3dVector(inlier_points)

outlier_cloud = o3d.geometry.PointCloud()

o3d.visualization.draw_geometries([plane_cloud])
